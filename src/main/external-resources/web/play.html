<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="/files/reset.css" type="text/css" media="screen">
		<link rel="stylesheet" href="/files/web.css" type="text/css" media="screen">
		<link rel="stylesheet" href="/files/web-narrow.css" type="text/css" media="screen and (max-width: 1080px)">
		<link rel="stylesheet" href="/files/web-wide.css" type="text/css" media="screen and (min-width: 1081px)">
		<link rel="icon" href="/files/favicon.ico" type="image/x-icon">
		<script type="text/javascript" src="/files/jquery.min.js"></script>
		<script type="text/javascript" src="/files/jquery.ums.js"></script>
		<script type="text/javascript" src="/files/play.js"></script>
		<script type="text/javascript" src="/files/js.cookie-2.1.0.min.js"></script>
		<title>{{name}}</title>
	</head>
	<body id="ContentPage">
		<script>
{{#prevId}}
			function prev() {window.location.replace('/play/{{prevId}}?html5=1');}
{{/prevId}}
{{#nextId}}
			function next() {window.location.replace('/play/{{nextId}}?html5=1');}
{{/nextId}}
{{#isVideo}}
			function flash() {window.location.replace('/play/{{id1}}?flash=1');}
{{/isVideo}}
		</script>
		<div id="Container">
			<div id="Menu">
				<div id="OptionsMenu">
					<form id="SearchForm" method="get" action="/browse/0">
						<input type="text" id="SearchInput" name="str">
						<input type="submit" id="SearchSubmit" title="Search" value="&nbsp;">
					</form>

					<ul class="HoverMenu" title="Settings">
						<a id="DocButton" title="Settings"></a>
						<ul id="SettingsMenu">
							<li><a href="/doc" id="Docs" title="Documentation"></a></li>
							<li><span><a href="javascript:setPadColor(1)" id="ViewPadColor" title="Change padding color"></a></span></li>
							<li>
								<a href="javascript:chooseView('grid')" id="ViewGrid" title="Switch to grid view"></a>
								<a href="javascript:chooseView('dynamic')" id="ViewDynamic" title="Switch to dynamic view"></a>
							</li>
						</ul>
					</ul>
				</div>
				<a href="/browse/0" id="HomeButton"></a>
			</div>

			<div id="VideoContainer">
{{^isVideo}}
				<div id="art">
				<img height=256 width=256 src="/thumb/{{id1}}" alt=""><br>
				<h2>{{name}}</h2>
				<h2>{{artist}}</h2>
				<h2>{{album}}</h2><br>
				</div>
{{/isVideo}}
				<{{mediaType}} id="player" controls {{auto}}>
					<source id="media" src="{{url}}" type="{{mime}}">
{{#sub}}
					<track kind="subtitles" src="/files/{{this}}" default>
{{/sub}}
				</{{mediaType}}>
				<div id="toolbar">
{{#resume}}
					<button id="resume" onclick="resume({{time}})">{{resumeTxt}} {{timeStr}}</button>
{{/resume}}
					<button id="prev" onclick="prev()"{{prevAttr}}><<</button>
					<button id="next" onclick="next()"{{nextAttr}}>>></button>
{{#plsSign}}
                    <button id="playlist" title="{{plsAttr}}" onclick="umsAjax('/playlist/{{plsOp}}/{{id1}}', false);return false;">{{plsSign}}</button>
{{/plsSign}}
{{#isVideo}}
					<button id="flash" onclick="flash()" title="Switch to flash player">Flash</button>
{{/isVideo}}
				</div>
			</div>
			<a href="/raw/{{id1}}" target="_blank" id="DownloadLink" title="Download this {{mediaType}}"></a>
		</div>
		<script>
{{#autoContinue}}
$(document).ready(function() {
			player.addEventListener('ended', next, false);
});
{{/autoContinue}}

{{#push}}
			function control(op, arg) {
				//console.log('control '+JSON.stringify(arguments));
				var player = document.getElementById('player');
				switch (op) {
					case 'play':
						player.play();
						break;
					case 'pause':
						player.pause(!player.paused);
						break;
					case 'stop':
						player.pause();
						break;
					case 'setvolume':
						player.volume = arg/100;
						break;
					case 'mute':
						player.muted = !player.muted;
						break;
				}
			}
{{/push}}			
		</script>
	</body>
</html>

